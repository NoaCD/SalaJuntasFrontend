document.addEventListener("DOMContentLoaded",function(){function i(t){n.addEvent({title:t.title,start:t.start,end:t.end,backgroundColor:t.color,description:t.description,tStartTime:moment(t.end).format("HH:mm:ss"),tEndTime:moment(t.start).format("HH:mm:ss")});console.log(n.getEvents())}var t=document.getElementById("agenda"),n=new FullCalendar.Calendar(t,{headerToolbar:{left:"prev,next today",center:"title",right:"timeGridDay,dayGridMonth,timeGridWeek,listWeek"},locale:"es",timeZone:"America/Merida",slotLabelFormat:{hour:"2-digit",minute:"2-digit",hour12:!0},navLinks:!0,dateClick:function(n){if(0)if(n.allDay==!0)$("#txtStart").val(n.dateStr),MostraModal();else{let t=moment(n.dateStr).format("YYYY-MM-D"),i=moment(n.dateStr).format("HH:mm"),r=moment(n.dateStr).format("YYYY-MM-D");$("#txtStart").val(t).prop("disable",!0);$("#tHoraInicio").val(i).prop("disabled",!0);MostraModal()}else mostrarAlertSwal("<i>¡Espera!<\/i>","¡Porfavor inicia sesion para realizar tu evento!")},eventClick:function(n){moment.locale("es");let i=n.event.extendedProps.usuario.primerNombre+" "+n.event.extendedProps.usuario.apellidoPaterno,t=n.event.extendedProps.fechaCreacion;console.log(n.event);let r=obtenerDuracionEvento(n.event.start,n.event.end);$("#txtShowTitle").html(n.event.title);$("#txtShowDateProgramated").html(`Para el ${moment(n.event.start).format("ll")}`);$("#txtShowSubtitle").html(n.event.extendedProps.usuario.departamento.nombre);$("#txtShowDescription").html(n.event.extendedProps.description);$("#txtShowDuration").html();n.event.extendedProps.fechaModificacion!=null&&n.event.extendedProps.fechaModificacion!=""?$("#txtShowUpdatedAt").html("Ultima actualizacion "+moment(n.event.extendedProps.fechaModificacion).fromNow()):$("#txtShowUpdatedAt").html("");$("#txtShowInLapses").html("<b>Especificaciones<\/b><br/><b>De<\/b> "+moment(n.event.extendedProps.tStartTime,"HH:mm").format("HH:mm")+" <b>A<\/b> "+moment(n.event.extendedProps.tEndTime,"HH:mm").format("HH:mm")+"<br><b>Duracion:<\/b> "+r+"<br>"+`Creado el: ${moment(t).format("D")} de ${moment(t).format("MMMM yy")} • <b>${i}</b>`);MostrarDetalleEvento()},eventSources:[{url:"/obtener-eventos/",method:"GET",extraParams:{idAreaMostrar:1},failure:function(){mostrarAlertSwal("No hay conexion con el API","Contacte con el desarrollador para solucionar este problema, gracias","","error");console.log(url)}}]});n.render();$("#addEvent").click(function(){let n=recolectarDatos("POST"),t=validarEvento(n);t?(i(n),CerrarModal()):mostrarAlertToast("Por favor completa todos los campos")})});